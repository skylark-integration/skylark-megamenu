/**
 * skylark-megamenu - A version of megamenu that ported to running on skylarkjs ui.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-megamenu/
 * @license MIT
 */
define(["skylark-jquery"],function(e){return e.fn.megaMenu=function(a){var s={caret:!1,textHighlighter:!1,caretArrows:[{up:"caret-up",down:"caret-down"}]},i=e.extend({menuBehaviour:"click",stickyHeader:!0,selector:e(this),caret:"",caretArrows:[{up:"",down:"",upUrl:"",downUrl:""}],highlighter:!0,followingHighlighter:!1,highlightColor:"",textHighlighterColor:"",animation:!1,animationClass:""},s,a),n=(i.selector,e(".main-links ul li a")),r=e(".menu-dropdown .menu-item-wrapper"),l=[],t=[],o=(e("#"+r.attr("id")),s.caretArrows[0].up),h=s.caretArrows[0].down;if(!1===i.stickyHeader?e(".mega-menu").removeClass("sticky-header"):e(".mega-menu").addClass("sticky-header"),!0===i.caret)o=i.caretArrows[0].up,h=i.caretArrows[0].down;(i.caretArrows[0].up||i.caretArrows[0].down)&&(i.caretArrows[0].upUrl=null,i.caretArrows[0].downUrl=null),e("a[data-submenu]").append('<span class="caret '+h+'"></span>'),!0===i.caret&&""!==i.caretArrows[0].downUrl&&(e(".mega-menu span.caret").removeClass("undefined"),e(".mega-menu span.caret").addClass("caret-img down"),e(".mega-menu span.caret.caret-img.down").css({"background-image":"url("+i.caretArrows[0].downUrl+")"})),e("<style>\n        .mega-menu .main-links ul li a:hover{\n          border-color:"+i.highlightColor+"}\n      </style>").appendTo("head"),n.on(i.menuBehaviour,function(){n.removeClass("highlight"),n.css({"border-color":""})}),""===i.menuBehaviour&&(i.menuBehaviour="click"),n.each(function(a){var s=e(this).attr("data-submenu");l.push(e(this).attr("data-submenu")),e(this).on(i.menuBehaviour,function(){var d=jQuery.inArray(s,t),c=e(this).find(".caret.caret-img");(n.find("span").removeClass(o),n.find("span").addClass(h),l[a]!=t[d]||e(r[d]).hasClass("active")?(e(r[d]).removeClass("active"),e(this).find("span").removeClass(o),e(this).find("span").addClass(h)):(r.removeClass("active"),e(r[d]).addClass("active"),e(this).find("span").removeClass(h),e(this).find("span").addClass(o)),e(".menu-dropdown").find(".menu-item-wrapper").hasClass("active")&&(e(".mega-menu span.caret").addClass("down"),e(".mega-menu span.caret").css({"background-image":"url("+i.caretArrows[0].downUrl+")"})),c.hasClass("down")?(c.removeClass("down"),c.addClass("up"),c.css({"background-image":"url("+i.caretArrows[0].upUrl+")"})):(c.removeClass("up"),c.addClass("down"),c.css({"background-image":"url("+i.caretArrows[0].downUrl+")"})),(n.find("span").hasClass("caret-up")||e(this).find("span").hasClass("up")&&!e(this).hasClass("highlight"))&&(e(this).addClass("highlight"),e(this).css({"border-color":i.highlightColor})),r.hasClass("dropdown"))&&e("#"+t[d]+".dropdown").css({left:e(this).offset().left})})}),!0===i.followingHighlighter&&(e(".main-links ul").append('<div class="follow-highlighter"></div>'),n.mouseover(function(a,s){a.pageX,e(this).offset().left,e(this).innerWidth();e(".follow-highlighter").css({display:"block"}),e(".main-links ul").addClass("follow-highlighter-enabled"),e(".follow-highlighter").css({width:e(this).innerWidth(),left:e(this).offset().left,"background-color":i.highlightColor})})),e(".main-links ul").each(function(){e(this).mouseleave(function(){e(".main-links ul").removeClass("follow-highlighter-enabled"),e(".follow-highlighter").css({display:"none",left:e(n[0]).offset().left})})}),!1===i.highlighter&&(e(".main-links").addClass("disable-highlighter"),e(".follow-highlighter").remove()),!0===i.textHighlighter&&e(".main-links").addClass("text-highlighter"),i.textHighlighterColor&&e("style").append(".mega-menu .text-highlighter.main-links ul li a:hover{\n        color:"+i.textHighlighterColor+"}"),r.each(function(a){t.push(e(r[a]).attr("id"))}),!0===i.animation&&r.addClass(i.animationClass),e(".mobile-nav-icon a").click(function(){e(".follow-highlighter").remove(),e(".main-links").hasClass("active")?(e(".main-links").removeClass("active"),e(".menu-dropdown").hide()):(e(".main-links").addClass("active"),e(".menu-dropdown").show())}),e(".menu-item-wrapper").prepend('<a href="#" class="back-link">Back</a>'),e(window).resize(function(){e(window).width()<768?e(".mega-menu").hasClass("sticky-header")&&(e(".mega-menu").addClass("responsive-menu"),e(".main-links").css({"margin-top":e(".mobile-nav-icon").outerHeight()+"px"})):e(".main-links").css({"margin-top":"0px"})}),e(document).ready(function(){e(".back-link").on("click",function(){n.trigger("click"),e(n[n.length-1]).trigger("click")})})},e});
//# sourceMappingURL=sourcemaps/megamenu.js.map
